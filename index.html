<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro Arendina</title>
    <style>
        /* Loader estilo spinner */
        .loader {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(2px);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .spinner {
            border: 6px solid #f3f3f3;
            border-top: 6px solid rgb(26, 217, 20);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        .loader p {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: rgb(26, 217, 20);
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Logo */
        .logo-container {
            text-align: center;
            margin: 20px 0;
        }

        .logo-container img {
            max-width: 320px;
            height: auto;
        }

        /* Oculto dinámico */
        #tituloPregradoContainer {
            display: none;
        }
    </style>
</head>

<body>
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>Enviando...</p>
    </div>

    <!-- Logo centrado -->
    <div class="logo-container">
        <img src="Logo.png" alt="Logo Arendina">
    </div>

    <form class="form" id="registroForm">
        <p class="title">Registro Arendina</p>
        <p class="message">Regístrate ahora y obtén un gran descuento.</p>

        <div class="flex">
            <label>
                <input required placeholder="" type="text" class="input" id="nombre">
                <span>Nombre completo</span>
            </label>

            <label>
                <input required placeholder="" type="text" class="input" id="documento">
                <span>Tipo y Número de documento</span>
            </label>
        </div>

        <div class="flex">
            <label>
                <input required type="date" class="input" id="fechaExpedicion">
                <span>Fecha de expedición</span>
            </label>

            <label>
                <input required placeholder="" type="text" class="input" id="ciudadExpedicion">
                <span>Ciudad de expedición</span>
            </label>
        </div>

        <div class="flex">
            <label>
                <input required type="date" class="input" id="fechaNacimiento">
                <span>Fecha de nacimiento</span>
            </label>

            <label>
                <input required placeholder="" type="text" class="input" id="lugarNacimiento">
                <span>Lugar de nacimiento</span>
            </label>
        </div>

        <label>
            <input required placeholder="" type="text" class="input" id="eps">
            <span>EPS</span>
        </label>

        <label>
            <select required class="input" id="grupoSanguineo">
                <option value="" disabled selected></option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
            </select>
            <span>Grupo Sanguíneo</span>
        </label>

        <label>
            <select required class="input" id="estadoCivil">
                <option value="" disabled selected></option>
                <option value="soltero">Soltero(a)</option>
                <option value="casado">Casado(a)</option>
                <option value="unionLibre">Unión Libre</option>
                <option value="divorciado">Divorciado(a)</option>
                <option value="viudo">Viudo(a)</option>
            </select>
            <span>Estado Civil</span>
        </label>

        <div class="flex">
            <label>
                <input required placeholder="" type="text" class="input" id="ciudadResidencia">
                <span>Ciudad de residencia</span>
            </label>

            <label>
                <input required placeholder="" type="text" class="input" id="departamento">
                <span>Departamento</span>
            </label>
        </div>

        <label>
            <input required placeholder="" type="text" class="input" id="direccion">
            <span>Dirección</span>
        </label>

        <label>
            <input required placeholder="" type="text" class="input" id="barrio">
            <span>Barrio</span>
        </label>

        <label>
            <input required placeholder="" type="tel" class="input" id="telefono">
            <span>Teléfono celular</span>
        </label>

        <label>
            <input required placeholder="" type="email" class="input" id="email">
            <span>Correo electrónico</span>
        </label>

        <label>
            <input required placeholder="" type="text" class="input" id="colegio">
            <span>Colegio donde cursó el bachiller</span>
        </label>

        <!-- Programa -->
        <label>
            <select required class="input" id="nivel">
                <option value="" disabled selected></option>
                <option value="pregrado">Pregrado</option>
                <option value="posgrado">Posgrado</option>
            </select>
            <span>Programa</span>
        </label>
        <label id="senaPregunta" style="display:none;">
            <select class="input" id="esSena">
                <option value="" disabled selected></option>
                <option value="si">Sí</option>
                <option value="no">No</option>
            </select>
            <span>¿Es estudiante SENA?</span>
        </label>

        <!-- Programa SENA (oculto al inicio) -->
        <label id="programaSenaLabel" style="display:none;">
            <input class="input" type="text" id="programaSena">
            <span>Programa procedencia SENA</span>
        </label>

        <!-- Carrera -->
        <label>
            <select required class="input" id="carrera">
                <option value="" disabled selected></option>
            </select>
            <span>Carrera por estudiar</span>
        </label>

        <!-- Pregunta SENA (oculto al inicio) -->



        <!-- Campo dinámico título pregrado -->
        <label id="tituloPregradoContainer">
            <input placeholder="" type="text" class="input" id="tituloPregrado">
            <span>Título Pregrado</span>
        </label>

        <!-- Asesor -->
        <label>
            <select required class="input" id="asesor">
                <option value="" disabled selected></option>
                <option value="Sebastian">Sebastián</option>
                <option value="Rosa">Rosa</option>
                <option value="Daniel">Daniel</option>
                <option value="Diana">Diana</option>
                <option value="Ninguno">Ninguno</option>
            </select>
            <span>Asesor</span>
        </label>

        <p class="title">Referencia Familiar (Contacto de emergencia)</p>

        <label>
            <input required placeholder="" type="text" class="input" id="referenciaNombre">
            <span>Nombre</span>
        </label>

        <label>
            <input required placeholder="" type="text" class="input" id="referenciaParentesco">
            <span>Parentesco</span>
        </label>

        <label>
            <input required placeholder="" type="tel" class="input" id="referenciaTelefono">
            <span>Teléfono</span>
        </label>

        <label>
            <input required placeholder="" type="email" class="input" id="referenciaEmail">
            <span>Correo electrónico</span>
        </label>

        <button type="submit" class="submit">Enviar</button>
    </form>

    <script>
        const carreras = {
            pregrado: [
                "Licenciatura en Educación Infantil",
                "Marketing de Negocios",
                "Finanzas y Negocios Internacionales",
                "Administración de empresas",
                "Licenciatura en Ciencias Sociales",
                "Psicología Profesional",
                "Ingeniería Industrial",
                "Ingeniería de Sistemas",
                "Administración en Salud",
                "Administración Pública",
                "Economía",
                "Comunicación Social",
                "Tecnología en Gestión del Talento Humano",
                "Tecnología en Logística",
                "Tecnología en Producción de Ganadería Sostenible",
                "Derecho",
                "Ingeniería de Software"
            ],
            posgrado: [
                "Esp. en Infancia, Adolescencia y Desarrollo Familiar",
                "Esp. en Derechos de autor, propiedad ind. y nuevas tec.",
                "Esp. Auditoria en Salud",
                "Esp. en Informática para la Innovación Educativa",
                "Esp. en Revisoría fiscal y auditoría forense",
                "Esp. en Pedagogía y Docencia",
                "Esp. Gerencia en Seguridad y Salud en el Trabajo",
                "Esp. Gestión Ambiental",
                "Esp. Gerencia Financiera",
                "Esp. Alta Gerencia",
                "Esp. Dirección y Producción de contenidos audiovisuales",
                "Maestría en Educación para la Innovación Pedagógica",
                "Maestría en Innovación",
                "Maestría en Gerencia de Mercadeo Digital",
                "Maestría en Epidemiología"
            ]
        };

        const nivelSelect = document.getElementById("nivel");
        const carreraSelect = document.getElementById("carrera");
        const tituloPregradoContainer = document.getElementById("tituloPregradoContainer");
        const tituloPregradoInput = document.getElementById("tituloPregrado");

        const senaPregunta = document.getElementById("senaPregunta");
        const esSenaSelect = document.getElementById("esSena");
        const programaSenaLabel = document.getElementById("programaSenaLabel");
        const programaSenaInput = document.getElementById("programaSena");

        nivelSelect.addEventListener("change", function () {
            const nivel = this.value;
            carreraSelect.innerHTML = '<option value="" disabled selected></option>'; // reset carreras

            if (carreras[nivel]) {
                carreras[nivel].forEach(c => {
                    const option = document.createElement("option");
                    option.value = c;
                    option.textContent = c;
                    carreraSelect.appendChild(option);
                });
            }

            // Mostrar campos dinámicos según nivel
            if (nivel === "posgrado") {
                tituloPregradoContainer.style.display = "block";
                tituloPregradoInput.setAttribute("required", "true");

                senaPregunta.style.display = "none";
                programaSenaLabel.style.display = "none";
                programaSenaInput.value = "";

            } else if (nivel === "pregrado") {
                senaPregunta.style.display = "block";

                tituloPregradoContainer.style.display = "none";
                tituloPregradoInput.removeAttribute("required");
                tituloPregradoInput.value = "";
            } else {
                senaPregunta.style.display = "none";
                programaSenaLabel.style.display = "none";
                tituloPregradoContainer.style.display = "none";
            }
        });

        esSenaSelect.addEventListener("change", function () {
            if (this.value === "si") {
                programaSenaLabel.style.display = "block";
                programaSenaInput.setAttribute("required", "true");
            } else {
                programaSenaLabel.style.display = "none";
                programaSenaInput.removeAttribute("required");
                programaSenaInput.value = "";
            }
        });

        const form = document.getElementById('registroForm');
        const loader = document.getElementById('loader');

      form.addEventListener('submit', function (event) {
    event.preventDefault();
    loader.style.display = "flex";

// En tu formulario, asegúrate de que el objeto data incluya TODOS los campos:
const data = {
    fechaInscripcion: new Date().toISOString(), // MOVER AL PRINCIPIO
    nombre: document.getElementById('nombre').value,
    documento: document.getElementById('documento').value,
    fechaExpedicion: document.getElementById('fechaExpedicion').value,
    ciudadExpedicion: document.getElementById('ciudadExpedicion').value,
    fechaNacimiento: document.getElementById('fechaNacimiento').value,
    lugarNacimiento: document.getElementById('lugarNacimiento').value,
    eps: document.getElementById('eps').value,
    grupoSanguineo: document.getElementById('grupoSanguineo').value,
    estadoCivil: document.getElementById('estadoCivil').value,
    ciudadResidencia: document.getElementById('ciudadResidencia').value,
    departamento: document.getElementById('departamento').value,
    direccion: document.getElementById('direccion').value,
    barrio: document.getElementById('barrio').value,
    telefono: document.getElementById('telefono').value,
    email: document.getElementById('email').value,
    colegio: document.getElementById('colegio').value,
    nivel: document.getElementById('nivel').value,
    carrera: document.getElementById('carrera').value,
    tituloPregrado: document.getElementById('tituloPregrado').value,
    esSena: document.getElementById('esSena').value,
    programaSena: document.getElementById('programaSena').value,
    asesor: document.getElementById('asesor').value, // ✅ AÑADIR ESTE CAMPO
    referenciaNombre: document.getElementById('referenciaNombre').value,
    referenciaParentesco: document.getElementById('referenciaParentesco').value,
    referenciaTelefono: document.getElementById('referenciaTelefono').value,
    referenciaEmail: document.getElementById('referenciaEmail').value
};

    console.log("Datos a enviar:", data); // Verifica que todos los campos estén presentes

    fetch('https://script.google.com/macros/s/AKfycbwEtF-bwrNJmLXqgL88AhQrGv-vIC-RfuuZLZTotYxGdl-RVXBapszSd7q_jUi7b-rtBQ/exec', {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
    })
    .then(() => {
        loader.style.display = "none";
        alert('✅ Formulario enviado correctamente');
        form.reset();
        tituloPregradoContainer.style.display = "none";
        senaPregunta.style.display = "none";
        programaSenaLabel.style.display = "none";
    })
    .catch(error => {
        loader.style.display = "none";
        alert('❌ Hubo un problema al enviar el formulario');
        console.error('Error:', error);
    });
});
    </script>



</body>

</html>